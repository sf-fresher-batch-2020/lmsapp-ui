<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- Bootstrap CSS -->
   <!--- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
   --><!-- jQuery and JS bundle w/ Popper.js -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="nav.css">
    <link rel="stylesheet" href="loinstyle.css">
    <script src="registerservice.js"></script>
    <script src="login.js"></script>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
</head>
<div id="header"></div>
<script>
    $("#header").load('./_header.html');
</script>
<body>
     <div class="hero">
            <div class="form-box">
                <div class="button-box">
                    <div id="btn"></div>
                    <button type="button" class="toggle-btn" onclick="login()">Log In</button>
                    <button type="button" class="toggle-btn" onclick="register()">Register</button>
                </div>
                <div class="socail-icons">
                    <img src="fb.png">
                    <img src="gmail.png">
                    <img src="tweet.png">
                </div>
                
                <form id="login" class="input-group" onsubmit="checking()">
                    <input type="email" class="input-field" placeholder="Enter Your Email" id="user_id" required>
                    <input type="password" class="input-field" placeholder="Enter Password" id="password" required>
                    <input type="checkbox" class="checkbox"><span>Remember Password</span>
                    <button type="submit" class="submit-btn">Log In</button>
                    
                </form>
                <form id="register" class="input-group" onsubmit="register_user()">
                    <input type="text" class="input-field" placeholder="Enter Your Name" id="r_name" required>
                    <input type="email" class="input-field" placeholder="Enter email Id" id="r_email" required>
                    <input type="password" class="input-field" placeholder="Enter Password" id="r_password" required>
                    <input type="checkbox" class="checkbox"><span>I agree to the terms and conditions</span>
                    <button type="submit" class="submit-btn">Register</button>
                    
                </form>
            </div>
           
        </div>
        <script>
            var x=document.querySelector("#login");
            var y=document.querySelector("#register");
            var z=document.querySelector("#btn");
            function register()
            {
                x.style.left="-400px";
                y.style.left="50px";
                z.style.left="110px";
            }
            function login()
            {
                x.style.left="50px";
                y.style.left="450px";
                z.style.left="0px";
            }
            function checking()
            {
                event.preventDefault();
                let email = document.querySelector("#user_id").value;
                let password = document.querySelector("#password").value;
                console.log("email: " +email +" pssword: "+password);
                //Step 2: Store all form values in a single object, so that it will easy to send 
            let obj = { "email" : email , "password": password };
            console.log(obj);
            var loginserviceobj= new LoginService();
             loginserviceobj.login(email,password);
            var user = loginserviceobj.login(email,password);
            if(user)
            {
                window.location.href="leaves.html";
            }
            else
            {
                alert("invalid email or password");
            }
            }
            function register_user()
            {
                event.preventDefault();
                let r_name = document.querySelector("#r_name").value;
                let r_email = document.querySelector("#r_email").value;
                let r_password = document.querySelector("#r_password").value;
                
            
                var userObj={"name":r_name, "email":r_email, "password":r_password};
      console.log(userObj);
      var registerserviceObj= new RegisterService();
      let result= registerserviceObj.register(userObj);
      if (result=="success"){
       alert("registered successfully");
       window.location.href="login.html"; 
      }
      else{
          alert("registration failed");
      }
       //var usersTemp = JSON.parse(localStorage.getItem("USERS"));
       //var users= usersTemp ? usersTemp:[];
       // users.push(userObj);
       //localStorage.setItem("USERS",JSON.stringify(users));
      
       }
            
        </script>
</body>

</html>

